!function(n){var e="",a={changed:[],preChange:[]},t=function(){var n={};for(var e in arguments)for(var a in arguments[e])n[a]=arguments[e][a];return n},h=function(){return{canRepeat:!1}},r=function(n,e){return a[e].indexOf(n)},c=function(n,t){var h=this,r={e:t||{},prevHash:e,newHash:h.getHash()};(h.config.canRepeat||r.newHash!==r.prevHash)&&a[n].forEach(function(n){"function"==typeof n&&n(r)}),e=h.getHash()},o=function(n){return"#"===n[0]&&(n=n.substring(1,n.length)),n},i=Object.create({start:function(a){var r=n.document.location.hash;this.config=t(h(),a||{}),"object"==typeof n.onhashchange&&(n.onhashchange=c.bind(this,"changed")),e=r?o(r):""},changed:{addHandler:function(n){r(n,"changed")==-1&&a.changed.push(n)},removeHandler:function(n){var e=r(n,"changed");e>-1&&a.changed.splice(e,1)}},preChange:{addHandler:function(n){r(n,"preChange")==-1&&a.preChange.push(n)},removeHandler:function(n){var e=r(n,"preChange");e>-1&&a.preChange.splice(e,1)}},reset:function(n){for(var e in a)a[e]=[];this.config=t(h(),n||{})},getHash:function(){var e=n.document.location.hash;return e?o(e):""},setHash:function(e){c.call(this,"preChange"),n.document.location.hash=e}}),f=n.define;f&&"function"==typeof f&&f.amd?f("hashHandler",function(){return i}):n.hashHandler=i}(window);